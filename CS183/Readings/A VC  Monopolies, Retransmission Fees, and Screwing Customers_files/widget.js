function getElementsByClassName(a,b,c){b=b||"*";c=c||document;var d=c.getElementsByTagName(b);if(!d.length&&b=="*"&&c.all)d=c.all;var e=new Array;var f=a.indexOf("|")!=-1?"|":" ";var g=a.split(f);for(var h=0,i=d.length;h<i;h++){var j=d[h].className.split(" ");if(f==" "&&g.length>j.length)continue;var k=0;comparisonLoop:for(var l=0,m=j.length;l<m;l++){for(var n=0,o=g.length;n<o;n++){if(g[n]==j[l])k++;if(f=="|"&&k==1||f==" "&&k==g.length){e.push(d[h]);break comparisonLoop}}}}return e}function addEvent(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false);EventCache.add(a,b,c)}else if(a.attachEvent){a["e"+b+c]=c;a[b+c]=function(){a["e"+b+c](window.event)};a.attachEvent("on"+b,a[b+c]);EventCache.add(a,b,c)}else{a["on"+b]=a["e"+b+c]}}function parseQuery(a){var b=new Object;if(!a)return b;var c=a.split(/[;&]/);for(var d=0;d<c.length;d++){var e=c[d].split("=");if(!e||e.length!=2)continue;var f=unescape(e[0]);var g=unescape(e[1]);g=g.replace(/\+/g," ");b[f]=g}return b}var scripts=document.getElementsByTagName("script");var myScript=scripts[scripts.length-1];var scriptSrc=myScript.src;var avcfmHost=scriptSrc.match(new RegExp("^(?:f|ht)tp(?:s)?://([^/]+)","im"))[1].toString();var queryString=scriptSrc.replace(/^[^\?]+\??/,"");var params=parseQuery(queryString);var placement="above";if(typeof params.placement!="undefined"&&params.placement=="below")placement=params.placement;var EventCache=function(){var a=[];return{listEvents:a,add:function(b,c,d){a.push(arguments)},flush:function(){var b,c;for(b=a.length-1;b>=0;b=b-1){c=a[b];if(c[0].removeEventListener){c[0].removeEventListener(c[1],c[2],c[3])}if(c[1].substring(0,2)!="on"){c[1]="on"+c[1]}if(c[0].detachEvent){c[0].detachEvent(c[1],c[2])}c[0][c[1]]=null}}}}();addEvent(window,"unload",EventCache.flush);Array.prototype.push=function(a){this[this.length]=a};addEvent(window,"load",function(){var a=getElementsByClassName("entry",null,document.getElementById("pagebody"));for(var b=0,c=a.length;b<c;b++){var d=a[b];var e=b+1;d.setAttribute("data-callid",e);var f=a[b].getAttribute("id").replace("entry-","");var g="http://"+avcfmHost+"/audio/"+f+".json";var h=document.getElementsByTagName("head")[0];var i=document.createElement("script");i.async=true;i.id="avcfm_call"+e;i.type="text/javascript";i.src=g;h.appendChild(i)}});window.avcfmCallback=function(a){if(typeof a.id!="undefined"&&a.id){var b=document.getElementById("entry-"+a.post_id);var c=b.getAttribute("data-callid");if(typeof b.children[0].tagName!="undefined"&&b.children[0].tagName=="ARTICLE")b=b.children[0];var d=document.createElement("iframe");d.setAttribute("src","http://"+avcfmHost+"/widget/"+a.id+"/html5");d.style.width="100%";d.style.height="220px";d.frameborder=0;d.marginheight=0;d.marginwidth=0;d.scrolling="no";d.setAttribute("id","audio-"+a.post_id);if(placement=="below")b.appendChild(d);else{var e=getElementsByClassName("entry-content","div",b);if(typeof e[0]=="object")b.insertBefore(d,e[0])}var f=document.getElementById("avcfm_call"+c);f.parentNode.removeChild(f)}}